<div class="wrapper account">
  <h2>Edit Account Details</h2>

  <%= form_for(fan, url: my_account_path, html: {class: "edit-fan-email"}) do |f| %>
    <div class="field">
      <%= f.label :email %><br />
      <%= f.email_field :email, autocomplete: "email" %>
    </div>

    <div class="field">
      <%= f.label :subscribed %><br />
      <%= f.check_box :subscribed %>
    </div>

    <div class="actions">
      <%= f.submit "Save", class: 'primary' %>
    </div>
  <% end %>

  <h2>Edit Password</h2>

  <%= form_for(fan, url: my_account_path, html: {class: "edit-fan-password"}) do |f| %>
    <div class="field">
      <%= f.label :password do %>
        Password
        <% if @minimum_password_length %>
        <em>(<%= @minimum_password_length %> characters minimum)</em>
        <% end %>
      <% end %>
      <br />
      <%= f.password_field :password, autocomplete: "new-password" %>
    </div>

    <div class="field">
      <%= f.label :password_confirmation %><br />
      <%= f.password_field :password_confirmation, autocomplete: "new-password" %>
    </div>

    <div class="actions">
      <%= f.submit "Save", class: 'primary' %>
    </div>
  <% end %>

  <h2>Connections</h2>

  <% if fan.provider == "last.fm" %>
    <p>Support Act is currently linked to your Last.fm account. If you wish to remove this connection, use the button below and all of your account information will be removed from Support Act.</p>

    <p>If you change your mind later, you can always reconnect your account.</p>

    <p><%= link_to "Disconnect Last.fm", last_fm_connection_path, method: :delete, class: "button", data: {confirm: "Are you sure? This will delete all your Last.fm information on Support Act."} %></p>
  <% elsif fan.provider == "spotify" %>
    <p>Support Act is currently linked to your Spotify account. If you wish to remove this connection, use the button below and all of your account information will be removed from Support Act.</p>

    <p>If you change your mind later, you can always reconnect your account.</p>

    <p><%= link_to "Disconnect Spotify", spotify_connection_path, method: :delete, class: "button", data: {confirm: "Are you sure? This will delete all your Spotify information on Support Act."} %></p>
  <% end %>

  <h2 id="remove">Removing your account</h2>

  <p>If you no longer wish to use Support Act, please click the button below to delete your account. All of your account data - the connection to Last.fm or Spotify, your purchased albums, your email and password - will be deleted permanently.</p>

  <p>Of course, there's nothing to stop you from signing up again later if you change your mind!</p>

  <p><%= link_to "Delete Account", my_account_path, method: :delete, class: "button", data: {confirm: "Are you sure? This will delete your entire account and all of your data on Support Act."} %></p>
</div>
